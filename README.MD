### 코딩 구현 테스트 과제

#### Date: 2022.10.27

#### summary: 파일 읽기 & API 구현 과정 코딩 테스트

#### Author: JmKanmo 

#### feedback

Q1: 애플리케이션 로딩 시에, ParserUtil 클래스에서 static 구문을 이용해 파일 로드 및 텍스트 데이터
파싱 작업(초기화) 을 진행 했는데, 과연 이 방식이 적절한가? 스프링 빈 초기화 시에, @PostConstruct를 사용하지 않은 이유 ?

A: Bean을 통한 초기화(힙 메모리) 보다, static을 이용한 로딩이 좀 더 빨리 메소드 영역(클래스, static 필드)영역에 로드되기 때문에 이러한 특성을 이점으로 사용하고자 함

P: static의 경우, 해당 클래스 ParsingUtil)가 다른 클래스에 의해 호출되는 시점에, 클래스로더에 의해 JVM에 로드된다.
따라서, 해당 클래스가 반드시 로드된다는 보장이 없기에 파일 데이터 로드 & 초기화(반드시 이루어져야 하는) 작업은 나의 목적(static 로드)이 아닌
@Configuration 클래스를 만든 뒤 내부에 @PostConstruct 메소드를 만들어 이를 통해 애플리케이션이 실행될 때, Spring IOC 빈 초기화 과정을 통해 반드시 초기화 되도록 하는 것이 좋다.

<br>

Q2: 한줄씩 텍스트 라인을 읽어서 파싱, 해쉬맵 메모리에 저장하는 작업을 코드로 작성 하였는데, 이전에 작성했던 전체 텍스트를 한번에 전부 읽는 방식의 경우
어떤 문제가 발생할 수 있는지? 그리고 특정 텍스트 라인을 읽고 파싱하는 중에 에러가 발생하면 어떻게 처리되는지? 부족한 점은 무엇인지?

A: 전체 텍스트를 readAllBytes 메소드를 이용해 한번에 전부 읽을 경우, 텍스트 파일의 크기에 따라 메모리 부하가 발생하게 된다. 지나치게 클 경우, 애플리케이션 실행 중에 OOM이 발생할 우려가
있습니다.
또한, 싱글스레드 방식으로 텍스트를 읽어들이기 때문에 CPU 사용량이 급격히 증가함은 물론 이 과정에서 blocking이 발생해 애플리케이션이 실행 중에 멈출(행이 걸릴) 우려가 있습니다.
따라서, 한라인씩 읽어들이되, 텍스트가 무척 길거나 파일이 클 경우, 멀티쓰레드 혹은 멀티 스트림을 이용해 멀티코어를 적절히 활용해 초기화 및 로드 과정에 걸리는 시간을 최대한 단축하도록 합니다. 

<br>

Q3: 텍스트 라인을 읽는 중에 예외 발생 시에, 어떻게 처리 되는가? , 특정 라인을 읽는 중에 예외가 발생하더라도 해당 라인을 제외한 나머지 텍스트 데이터를 
읽고 파싱 & 저장 하는 것에는 문제가 없는가?, 예외가 발생할 때, 해당 예외 내용을 로그 or 콘솔로 기록하는가? 

A: 현재는 텍스트 라인을 읽는 중에 예외가 발생하면 바로 예외를 던지고 로그 출력, 읽기 작업을 중단한다. 
실제 업무에서는 예외가 발생할 경우, 예외를 기록,출력하고 예외가 발생한 데이터는 예외 상황에 맞도록 데이터를 삽입한다. (데이터를 삽입하지 않는 것은 우리의 과제 조건에 맞지 않다.)
예를 들어, 특정 데이터가 잘못된 형식일 경우에 해당 데이터를 삽입하지 않고 에러 상황에 맞는 데이터(ex- WRONG_DATA)를 삽입하도록 한다.
반드시 데이터를 읽는 도중에 어떠한 에러가 발생해도 읽기 작업을 중단해서는 안된다. 그 대신에 예외 상황에 맞는 동작(앞에 명시)을 수행하도록 한다. 
따라서, 에러가 발생해도 정해진 개수의 모든 데이터를 삽입하되 예외가 발생한 데이터는 에러 상황에 맞는 데이터(ex- WRONG_DATA)를 대신 생성해서 삽입하도록 한다.

<br>

Q4: Controller, Service 레이더 단에서 예외가 발생할 경우에는 어떻게 대응할 것인가? 

A: Exception Advice 클래스, 메소드를 추가하도록 한다. 컨트롤러, 서비스 단에서 예외가 발생하는 상황이 해당 애플리케이션에서 
흔치 않겠지만, Parsing & 데이터 반환 레이어보다 상위 레이어(컨트롤러,서비스) 에서 예기치 못한 예외가 발생해서 올바른 데이터를 반환하지 못할 경우에는 예외를 로그 or 콘솔에 출력함은 물론 
예외 상황에 맞는 응답 DTO를 만들어서 이를 반환하도록 한다.
